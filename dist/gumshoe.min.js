/*! gumshoe v4.0.0 | (c) 2019 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/gumshoe */
!(function(t,n){"function"==typeof define&&define.amd?define([],(function(){return n(t)})):"object"==typeof exports?module.exports=n(t):t.Gumshoe=n(t)})("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(t){"use strict";var n={navClass:"active",contentClass:"active",nested:!1,nestedClass:"active",offset:0,reflow:!1,events:!0},e=function(t,n,e){if(e.settings.events){var o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:e});n.dispatchEvent(o)}},o=function(t){var n=0;if(t.offsetParent)for(;t;)n+=t.offsetTop,t=t.offsetParent;return n>=0?n:0},s=function(t){t.sort((function(t,n){return o(t.content)<o(n.content)?-1:1}))},i=function(t,n){var e=t.getBoundingClientRect(),o=(function(t){return"function"==typeof t.offset?parseFloat(t.offset()):parseFloat(t.offset)})(n);return parseFloat(e.top)<=o&&parseFloat(e.bottom)>o},a=function(t,n){if(n.nested){var e=t.closest("li");e&&(e.classList.remove(n.nestedClass),a(e,n))}},r=function(t,n){if(t){var o=t.nav.closest("li");o&&(o.classList.remove(n.navClass),t.content.classList.remove(n.contentClass),a(o,n),e("gumshoeDeactivate",o,{link:t.nav,content:t.content,settings:n}))}},c=function(t,n){if(n.nested){var e=t.closest("li");e&&(e.classList.add(n.nestedClass),c(e,n))}};return function(o,a){var l,f,u,v,d,m={};m.setup=function(){l=document.querySelectorAll(o),f=[],Array.prototype.forEach.call(l,(function(t){var n=document.getElementById(decodeURIComponent(t.hash.substr(1)));n&&f.push({nav:t,content:n})})),s(f)},m.detect=function(){var t=(function(t,n){for(var e=t.length-1;e>=0;e--)if(i(t[e].content,n))return t[e]})(f,d);t?u&&t.content===u.content||(r(u,d),(function(t,n){if(t){var o=t.nav.closest("li");o&&(o.classList.add(n.navClass),t.content.classList.add(n.contentClass),c(o,n),e("gumshoeActivate",o,{link:t.nav,content:t.content,settings:n}))}})(t,d),u=t):u&&(r(u,d),u=null)};var p=function(n){v&&t.cancelAnimationFrame(v),v=t.requestAnimationFrame(m.detect)},y=function(n){v&&t.cancelAnimationFrame(v),v=t.requestAnimationFrame((function(){s(),m.detect()}))};return m.destroy=function(){u&&r(u),t.removeEventListener("scroll",p,!1),d.reflow&&t.removeEventListener("resize",y,!1),f=null,l=null,u=null,v=null,d=null},m.init=function(e){d=(function(){var t={};return Array.prototype.forEach.call(arguments,(function(n){for(var e in n){if(!n.hasOwnProperty(e))return;t[e]=n[e]}})),t})(n,e||{}),m.setup(),m.detect(),t.addEventListener("scroll",p,!1),d.reflow&&t.addEventListener("resize",y,!1)},m.init(a),m}}));